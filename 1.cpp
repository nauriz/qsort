#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <conio.h>

void qSort(int a[], int left, int right) 
{
    int i = left, j = right;
    int z; // ?????????? ??? ?????????? ??????? ?? ?????
    int Mass = a[(left + right) / 2];
 
    // ?????????? ?? ?????
    while (i <= j) // ???? i ?????? ???? ????? j 
	{
        while (a[i] < Mass) // ???? ????? [i] ?????? ???????? ??????????????? ??????? 
        i++;// ????????????? , ????? ????????
        while (a[j] > Mass) //???? ????? [j] ,?????? ???????? ??????????????? ??????? 
        j--; // ????????????? , ???? ????????
        if (i <= j) // ???? i ?????? ???? ????? j ?????? ??????? ???????? ???????? ????? ?????????? z 
		{
            z = a[i];
            a[i] = a[j];
            a[j] = z;
            i++;//?????????????? i
            j--;// ?????????????? j
        }
    };
 
    // ????????
    if (left < j)
    qSort(a, left, j);
    if (i < right)
    qSort(a, i, right);
 
}


void main()
{
int* a;
int n, i, k;
printf("Razmer massiva: \n");
scanf("%d", &n);
a=(int*)calloc(n,sizeof(int));//??????? ???????????? ??????
printf("Do sortirovki\n");
srand(time(NULL));
for(i=0;i<n;i++)
{
a[i]=rand()%100;
printf("%d ", a[i]); //??????? ?????? ?? ??????????
}
qSort(a, 0 , n-1);
printf("\nPosle sortirovki\n");
for(i=0;i<n;i++)
{
printf("%d ", a[i]); //???????? ?????? ????? ??????????
}
free (a);
getch();
}